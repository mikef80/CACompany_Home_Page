$push={};jQuery(document).ready(function($){var getUrlParameter=function getUrlParameter(sParam){var sPageURL=window.location.search.substring(1),sURLVariables=sPageURL.split('&'),sParameterName,i;for(i=0;i<sURLVariables.length;i++){sParameterName=sURLVariables[i].split('=');if(sParameterName[0]===sParam){return sParameterName[1]===undefined?!0:decodeURIComponent(sParameterName[1])}}};var prettify=function(str){var splitStr=str.replace(/-/g,' ');var prettyStr=splitStr.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()});return prettyStr};var $extra_view={};$.views.tags({setvar:function($key,$value){$extra_view[$key]=$value}});$.views.helpers({getvar:function($key){return $extra_view[$key]}});String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}
var $donatron=$('<div id="donatron" class="dc" />'),$modal=$('<div id="donatron-modal"><a id="donatron-close" class="next-step-close">Close</a></div>').appendTo('body'),$embed=!1;var $campaign=($('[data-wasteland]').length>0?'wasteland':'donatron');if($('#donatron-embed').length>0){var $embed=$('#donatron-embed');$embed.html($donatron)}else{$modal.append($donatron)}
var $date=new Date(),$version=$date.getMinutes()+'1';var $donate_custom;var $base_address=location.protocol+'//'+location.host,$full_address=$base_address+window.location.pathname,$template_root=$base_address+'/wp-content/themes/sas-biscuits/pushlogic/',$ajax_path=$base_address+'/wp-admin/admin-ajax.php';var $render={};var $states={};$states.modal=0;$states.tab=0;$states.option=0;$states.cart=0;function donate_load($piece,$scroll){var $piece=$piece||!1,$scroll=$scroll||!0;if($piece){$piece=$piece.replace('-','');$piece=$piece.replace('+','');$donatron.addClass('donation-load');if(!($piece in $render)){$.get($template_root+'templates/'+$piece+'.html?v='+$version,function($return_template){$render[$piece]=$.templates($return_template);$donatron.html($render[$piece].render($push));setTimeout(function(){$donatron.removeClass('donation-load')},150);donate_load_after($piece)})}else{$donatron.html($render[$piece].render($push));setTimeout(function(){$donatron.removeClass('donation-load')},150);donate_load_after($piece)}
if($scroll){if($states.modal==0){$('html, body').scrollTop($donatron.offset().top-100)}else{$('html, body').scrollTop($donatron.offset().top)}}}}
var contact_warned=!1;function verify_contact_details(){if(!contact_warned&&!$('input[name="contact_email_toggle"]').attr('checked')&&!$('input[name="contact_text_toggle"]').attr('checked')&&!$('input[name="contact_phone_toggle"]').attr('checked')&&!$('input[name="contact_post_toggle"]').attr('checked')){$('.donation-contact').prepend('<p class="opt-in-error">If you select no contact options at all, we will not be able to contact you.</p>');contact_warned=!0;return!1}
return!0}
function donate_load_before($target){var $target=$target||!1;if($target&&$target!=="0"){switch($target){case 'options-':$push.user={};$push.user.fields={};$push.user.product={};$states.tab=0;$states.option=0;$states.step=0;donate_load($target);if(get_donate_type()=='business'){donate_tabs('donation-business')}else{donate_tabs('donation-monthly')}
donate_campaign_refresh($donatron);break;case 'details+':if(donate_capture('select')){donate_load($target)}
break;case 'payment+':var donation_tracking=new PushLogic_Tracking($push,!0);donation_tracking.add_shipping_info();if(donate_capture('details')){donate_load($target)}
break;case 'woocommerce+':if(donate_capture('details')){donate_load($target)}
break;case 'checkout+':if(donate_validate()){var $prepare=$donatron.find('form').serialize();$donatron.addClass('donation-load');$.ajaxSetup({dataFilter:function(raw_response,dataType){if('json'!==dataType){return raw_response}
try{var data=$.parseJSON(raw_response);if(data&&'object'===typeof data){return raw_response}}catch(e){var valid_json=raw_response.match(/{"result.*"}/);if(null===valid_json){console.log('Unable to fix malformed JSON')}else{console.log('Fixed malformed JSON. Original:');console.log(raw_response);raw_response=valid_json[0]}}
return raw_response}});$.ajax({type:'POST',url:$base_address+'/checkout/?wc-ajax=checkout',data:$prepare,dataType:'json',success:function(response){if(response.result=='failure'){var $new_error=$(response.messages),$old_error=$('.woocommerce-error');if($old_error.length>0){$old_error.slideUp()}
$new_error.hide().appendTo('#donation-woocommerce').slideDown();setTimeout(function(){$donatron.removeClass('donation-load')},500)}else{setTimeout(function(){window.location.href=response.redirect},500)}},error:function(jqXHR,textStatus,errorThrown){var $new_error=$(errorThrown),$old_error=$('.woocommerce-error');if($old_error.length>0){$old_error.slideUp()}
$new_error.hide().appendTo('#donation-woocommerce').slideDown();setTimeout(function(){$donatron.removeClass('donation-load')},500)}})}
break;case 'confirmation+':var donation_tracking=new PushLogic_Tracking($push,!0);donation_tracking.add_payment_info();if(donate_capture('account')){$donatron.addClass('donation-load');$.ajax({url:$ajax_path,type:'post',data:{action:'donate_soap',campaign:$campaign,data:$push.user.fields.account},success:function($result){$result=$result.trim();var $split=$result.indexOf('{'),$response=$result.substring(0,$split);if($response=='success_'){$push.user.fields.account.detail={};$push.user.fields.account.detail=$.parseJSON($result.substring(8));$donatron.find('#donate-mosaic-error').addClass('donation-hidden');donate_load($target)}else{$donatron.find('#donate-mosaic-error > span').text($result.substring(8));$donatron.find('#donate-mosaic-error').removeClass('donation-hidden');$donatron.find('form').addClass('invalid');$('input[name=account_number]').closest('.row').addClass('error');$('input[name^=sort_code_]').closest('.row').addClass('error');setTimeout(function(){$donatron.removeClass('donation-load')},500)}}})}
break;case 'success+':var donation_tracking=new PushLogic_Tracking($push,!0);donation_tracking.purchase();$(document).on('click','#sas-take-action-link',function(e){var takeActionUrl=window.location.protocol+"//"+window.location.host+'/take-action/';$(this).attr('href',takeActionUrl)});var $prepare=JSON.parse(JSON.stringify($push.user));$donatron.addClass('donation-load');$.ajax({url:$ajax_path,type:'post',data:{action:'donate_push',campaign:$campaign,donation_campaign:$push.donation_campaign,data:$prepare},success:function($response){donate_load($target);setTimeout(function(){$donatron.removeClass('donation-load')},500)}});break;case 'exit+':$push.user={};$push.user.fields={};$push.user.product={};$states.tab=0;$states.option=0;$states.step=0;var homeUrl=window.location.protocol+"//"+window.location.host;window.location.href=homeUrl;break;default:donate_load($target)}}}
function donate_load_after($type){var $type=$type||!1;if($type){switch($type){case 'options':if($('.page-template-page-donate').length>0){var donation_tracking=new PushLogic_Tracking($push,!0);donation_tracking.begin_checkout()}
if(getUrlParameter('petition')!==undefined){$push.user.fields.petition=prettify(getUrlParameter('petition'))}
if(getUrlParameter('campaign')!==undefined){$push.donation_campaign=prettify(getUrlParameter('campaign'))}
club_two_fifty_display();donate_length_type();donate_tabs('donation-monthly');donate_campaign_data_push();sas_donate_landing_page_copy();history.replaceState(null,null,$full_address);if($('[data-donate]').length>0){donate_tabs('donation-'+$('[data-donate]').data('donate'))}
$('.donate-box').each(function(){var $option_info_wrap=$(this).find('.donation-option-info-wrap');var $option_info_text=$(this).find('.donation-slider').find('.donate-active').find('.donation-option-info').clone();$option_info_wrap.empty();$($option_info_text).prependTo($option_info_wrap).fadeIn()});$(document).on('click','#donation-type-tabs li',function(){$(this).closest('#donation-switcher').find('.donation-slide').removeAttr('style');var membership_checkbox=$(this).closest('#donation-switcher').find('#owner_type');if($(membership_checkbox).is(':checked')){$(membership_checkbox).click()}
var $button_label=$(this).closest('#donation-switcher').find('.donation-pagination .next-step-details span');var $option_text_type=$(this).closest('#donation-switcher').find('.donate-active .donation-option-info h5 span');if($(this).attr('data-tab')=='donation-single'){$button_label.text('Donate Now');$option_text_type.text('donation')}else{$button_label.text('Join Now');$option_text_type.text('a month')}});sas_donate_hide_tabs($('#donation-type-tabs'));break;case 'details':var donation_tracking=new PushLogic_Tracking($push,!0);donation_tracking.add_to_cart();var $field_sets=['billing_country','shipping_country'];sas_set_woo_pages_data();sas_reps_rep_display();sas_reps_autocomplete();sas_facebook_pixel_data_storage();if(!('billing_country'in $render)){$.get($template_root+'templates/countries.html?v='+$version,function($return_template){$render.country=$.templates($return_template);$.each($field_sets,function($i,$e){$donatron.find('[name='+$e+']').replaceWith($render.country.render({'address':$e}))})})}else{$.each($field_sets,function($i,$e){$donatron.find('[name='+$e+']').replaceWith($render.country.render({'address':$e}))})}
history.replaceState(null,null,'#'+$type);$('#sas_donation_billing_lookup').getAddress({api_key:'l_jYIF3mnUqwv8WVzSc34A20358',output_fields:{line_1:'#billing_address',post_town:'#billing_town',county:'#billing_county',postcode:'#billing_postcode'},onLookupError:function(){alert('We\'re unable to lookup your address, please enter it in manually below');$('.donation-address-fields-bill').slideDown()},onAddressSelected:function(elem,index){var address=elem.split(',');var address_string=address[0];if(address[1]!==' '){address_string=address_string+','+address[1]}
if(address[2]!==' '){address_string=address_string+','+address[2]}
if(address[3]!==' '){address_string=address_string+','+address[3]}
$('#billing_address').val(address_string);var postcode=$("#billing_postcode").val();var parts=postcode.match(/^([A-Z]{1,2}\d{1,2}[A-Z]?)\s*(\d[A-Z]{2})$/);if(!parts){return}
parts.shift();$("#billing_postcode").val(parts.join(' '))}});$('#sas_donation_shipping_lookup').getAddress({api_key:'l_jYIF3mnUqwv8WVzSc34A20358',output_fields:{line_1:'#shipping_address',post_town:'#shipping_town',county:'#shipping_county',postcode:'#shipping_postcode'},onLookupError:function(){alert('We\'re unable to lookup your address, please enter it in manually below');$('.donation-address-fields-bill').slideDown()},onAddressSelected:function(elem,index){var address=elem.split(',');var address_string=address[0];if(address[1]!==' '){address_string=address_string+','+address[1]}
if(address[2]!==' '){address_string=address_string+','+address[2]}
if(address[3]!==' '){address_string=address_string+','+address[3]}
$('#shipping_address').val(address_string);var postcode=$("#shipping_postcode").val();var parts=postcode.match(/^([A-Z]{1,2}\d{1,2}[A-Z]?)\s*(\d[A-Z]{2})$/);if(!parts){return}
parts.shift();$("#shipping_postcode").val(parts.join(' '))}});$('.donation-manual-address').click(function(){$(this).closest('fieldset').find('.donation-address-fields').slideDown()});break;case 'woocommerce':var donation_tracking=new PushLogic_Tracking($push,!0);donation_tracking.cache_checkout_data();donation_tracking.add_shipping_info();$.ajax({url:$ajax_path,type:'post',data:{action:'donate_checkout',campaign:$campaign},success:function(response){$donatron.find('#donation-woocommerce').html(response);donate_input()}});history.replaceState(null,null,'#'+$type);break;case 'checkout':donate_campaign_success($donatron,'single');break;case 'success':donate_campaign_success($donatron,'monthly');if(!('social'in $render)){$.get($template_root+'templates/social.html?v='+$version,function($return_template){$render.social=$.templates($return_template);$donatron.find('#donation-social').replaceWith($render.social.render({'address':$full_address}))})}else{$donatron.find('#donation-social').replaceWith($render.social.render({'address':$full_address}))}
history.replaceState(null,null,'#'+$type);break;default:history.replaceState(null,null,'#'+$type)}}}
function donate_modal_open(){if($embed&&$states.modal==0){$('body').addClass('donatron-modal');$states.modal=1;$donatron.detach();$modal.append($donatron);history.replaceState(null,null,'#modal')}else if($states.modal==0){$('body').addClass('donatron-modal');$states.modal=1;history.replaceState(null,null,'#modal')}}
function donate_modal_close(){if($embed&&$states.modal==1){$('body').removeClass('donatron-modal');$states.modal=0;$donatron.detach();$embed.html($donatron);history.replaceState(null,null,$full_address)}else if($states.modal==1){$('body').removeClass('donatron-modal');$states.modal=0;history.replaceState(null,null,$full_address)}}
function donate_option($target,$config,$custom,$gifted){var $target=$target||!1,$config=$config||!1,$custom=$custom||!1,$gifted=$gifted||!1;if($target){var $key=$target.split('/').map(Number);if($key.length==2){$push.user.product.option={};$push.user.product.option=JSON.parse(JSON.stringify($push.products[$key[0]].options[$key[1]]));$push.user.product.slug=JSON.parse(JSON.stringify($push.products[$key[0]].slug));$push.user.product.title=JSON.parse(JSON.stringify($push.products[$key[0]].title));$push.user.product.content=JSON.parse(JSON.stringify($push.products[$key[0]].content));if($custom){$push.user.product.option.value=$custom}
var $fields=$donatron.find('fieldset[class$=-option]');$fields.find('.donation-recipient-option').addClass('donation-hidden');if($config){var $settings=$config.split('/').map(String);$.each($settings,function($i,$e){$donatron.find('.donation-'+$e+'-option').removeClass('donation-hidden')})}
if(parseInt($push.user.product.option.id)!==0){donate_switch_type('product')}else{donate_switch_type('monthly')}}}}
function donate_custom($target){var $option=$target.closest('.donate-box').find('.donate-active'),$option=$option||!1;if($option){var $custom=parseFloat($target.val()).toFixed(2),$default=$target.data('value');var $update=$option.data('option'),$config=$option.data('config'),$gifted=!1;$option.find('h4').html('&pound'+$custom);donate_option($update,$config,$custom)}}
function donate_clear_cart(){if($states.cart==1){$.ajax({url:$ajax_path,type:'post',data:{action:'donate_clear_cart'},success:function(response){$states.cart=0}})}}
function donate_add_to_cart($option){var $option=$option||!1;if($option){$.ajax({url:$ajax_path,type:'post',data:{action:'donate_add_to_cart',data:$option},success:function(response){$states.cart=1}})}}
function donate_tabs($target,$first){var $target=$target||!1;if($target){var $default=$('#'+$target).find('.donate-active');if($default.length>0&&$default.is('[data-option]')){var $option=$default.data('option')||!1,$config=$default.data('config')||!1;if($option){donate_option($option,$config)}}
if($states.tab!==0){$('#'+$states.tab).removeClass('donate-active');$('[data-tab='+$states.tab+']').removeClass('donate-active')}
$('#'+$target).addClass('donate-active');$('[data-tab='+$target+']').addClass('donate-active');$states.tab=$target}}
function donate_capture($property,$parent){var $property=$property||!1,$parent=$parent||!1;if($property){var $append={};$append[$property]={};if(donate_validate()){$donatron.find(($parent?$parent+' ':'')+'form').serializeArray().map(function(x){$append[$property][x.name]=x.value});$push.user.fields[$property]=$append[$property];return!0}else{return!1}}else{return!1}}
function donate_switch_type($type){var $type=$type||!1;if($type){switch($type){case 'product':if('old_id'in $push.user.product.option){$push.user.product.option.id=$push.user.product.option.old_id}
$push.user.product.slug='single';donate_add_to_cart($push.user.product);break;case 'recurring':$push.user.product.option.old_id=$push.user.product.option.id;$push.user.product.option.id='0';$push.user.product.slug='annually';donate_clear_cart();break;case 'monthly':$push.user.product.option.old_id=$push.user.product.option.id;$push.user.product.option.id='0';$push.user.product.slug='monthly';donate_clear_cart();break}}}
function donate_validate(){var $field=$donatron.find('[required]'),$valid=!0;if($field.length>0){$('.row.error').removeClass('error');$('form.invalid').removeClass('invalid');for(var $i=0,$fields=$field.length;$i<$fields;$i++){var $clear=!0;if($field.eq($i).val()==0){$field.eq($i).closest('.row').addClass('error');$('.donation-address-fields-bill').slideDown();$('.donation-address-fields-ship').slideDown();$valid=!1;$clear=!1}else{if($field.eq($i).is('[data-validate]')){var $format=$field.eq($i).data('validate');switch($format){case 'formatCardNumber':if(!$.payment.validateCardNumber($field.eq($i).val())){$valid=!1;$clear=!1}
break;case 'formatCardExpiry':if(!$.payment.validateCardExpiry($field.eq($i).payment('cardExpiryVal'))){$valid=!1;$clear=!1}
break;case 'formatCardCVC':var $type=$('[data-card-type]').find(":selected").val();$type=$type.replace(' ','');$type=$type.toLowerCase();if(!$.payment.validateCardCVC($field.eq($i).val(),$type)){$valid=!1;$clear=!1}
break}}}
if(!$clear){$field.eq($i).closest('.row').addClass('error');$('.donation-address-fields-bill').slideDown();$('.donation-address-fields-ship').slideDown()}}}
if(!$valid){$donatron.find('form').addClass('invalid');$('.donation-address-fields-bill').slideDown();$('.donation-address-fields-ship').slideDown()}
return $valid}
function donate_input(){var $field=$donatron.find('[data-validate]');if($field.length>0){for(var $i=0,$fields=$field.length;$i<$fields;$i++){$field.eq($i).payment($field.eq($i).data('validate'))}}}
function donate_checkout($data){var $data=$data||!1;if($data&&donate_validate()){$.post($base_address+'/checkout/?wc-ajax=checkout',$data,function($response){if($response.result=='failure'){var $new_error=$($response.messages),$old_error=$('.woocommerce-error');if($old_error.length>0){$old_error.slideUp()}
$new_error.hide().appendTo('#donation-woocommerce').slideDown()}else{donate_load('success+');donate_clear_cart()}})}}
function donate_deploy(){$.get($template_root+'data/'+$campaign+'.json?v='+$version).done(function($response){$push=$response;$push.user={};$push.user.fields={};$push.user.product={};$push.stage={};$push.stage.prev='';$push.stage.next='';donate_load('options-',!0);$donatron.addClass('donation-live')},'json');$(document).on('click','[data-action]',function(){var $target=$(this).attr('data-action')||!1;if($target&&!$(this).hasClass('disabled')){var $button=$(this);$button.removeAttr('data-action');setTimeout(function(){$button.attr('data-action',$target)},2500);donate_load_before($target)}});$(document).on('click','[data-tab]',function(){var $target=$(this).attr('data-tab')||$states.tab;if($states.tab!==$target){donate_tabs($target)}});$(document).on('click','a.option',function(){$donatron.addClass('donation-load')});$(document).on('click','[data-option]',function(){var $target=$(this).data('option')||!1,$config=$(this).data('config')||!1;if($target){var $option=$(this).closest('.donation-slide');$option.closest('.donation-slider').find('.donate-active').removeClass('donate-active');$option.addClass('donate-active');if($(this).attr('data-campaign')&&$(this).attr('data-amount')){donate_option($target,$config,$(this).attr('data-amount'))}else{donate_option($target,$config)}
var $field_wrap=$(this).find('.donation-custom');if($field_wrap.length>0){var $option_info_wrap=$option.closest('.donate-box').find('.donation-option-info-wrap');var $option_info_text=$option.closest('.donation-slider').find('.donate-active').find('.donation-option-info').clone();$($field_wrap.clone()).appendTo($option_info_text);$option_info_wrap.empty();$($option_info_text).prependTo($option_info_wrap).fadeIn();var $field=$option.closest('.donate-box').find('.donation-option-info-wrap').find('input[name=other_amount]');if($field.length>0&&$field.val()!==''){donate_custom($field)}}else{var $donate_button=$(this).closest('#donatron-embed-wrap').find('.next-step-details').removeClass('disabled');var $option_info_wrap=$option.closest('.donate-box').find('.donation-option-info-wrap');var $option_info_text=$option.closest('.donation-slider').find('.donate-active').find('.donation-option-info').clone();$option_info_wrap.empty();$($option_info_text).prependTo($option_info_wrap).fadeIn()}}});$(document).on('focus','.donatron-modal input',function(){$('body').addClass('safari-fix')}).on('blur','.donatron-modal input',function(){$('body').removeClass('safari-fix');setTimeout(function(){$(document).scrollTop($(document).scrollTop())},1)});var $delay_custom=(function(){var timer=0;return function(callback,ms){clearTimeout(timer);timer=setTimeout(callback,ms)}})();$(document).on('click focus','input[name=other_amount]',function(e){e.stopPropagation();var $field=$(this);$field.closest('[data-option]').trigger('click');if($field.val()!==''){donate_custom($field)}});$(document).on('change keyup','input[name=other_amount]',function(e){e.stopPropagation();var $field=$(this),$container=$field.closest('.donation-custom'),$btn=$('.button-next');$min=parseInt($field.attr('min'));$container.find('.donation-custom-validate').remove();if(Number.parseInt($field.val())<Number.parseInt($field.attr('min'))){$('<div class="donation-custom-validate"><p>Please enter £'+$field.attr('min')+' or more...</p></div>').appendTo($container);$btn.addClass('disabled')}else{$btn.removeClass('disabled')}
if($field.val()!==''&&!$btn.hasClass('disabled')){$btn.addClass('disabled');$delay_custom(function(){donate_custom($field);$btn.removeClass('disabled')},1500)}});$(document).on('focus','.error > input, .error > select',function(){$(this).closest('.error').removeClass('error');$('form.invalid').removeClass('invalid')});$(document).on('change','input[name=monthly]',function(){if($(this).is(':checked')){donate_switch_type('monthly');$('input[name=recurring]').prop('checked',!1)}else{donate_switch_type('product')}});$(document).on('change','input[name=recurring]',function(){if($(this).is(':checked')){donate_switch_type('recurring');$('input[name=monthly]').prop('checked',!1)}else{donate_switch_type('product')}});$(document).on('change','input[name=owner]',function(){$('input[name=owner]').not(this).prop('checked',!1);var $target=$(this).closest('form');if($target.find('input[name=owner]:checked').val()=='gift'){$target.find('.donation-recipient-option input[value=gift]').prop('checked',!0)}else{$target.find('.donation-recipient-option input[value=self]').prop('checked',!0)}});$(document).on('change','input[name=send_to]',function(){$('input[name=send_to]').not(this).prop('checked',!1);var $target=$(this).closest('form');if($target.find('input[name=send_to]:checked').val()=='purchaser'){$target.find('input[value=purchaser]').prop('checked',!0)}else{$target.find('input[value=recipient]').prop('checked',!0)}});$(document).on('change','input[name=shipping_different_address]',function(){if($(this).is(':checked')){$('#shipping_toggle').removeClass('donation-hidden').find('[data-required]').removeAttr('data-required').prop('required',!0)}else{$('#shipping_toggle').addClass('donation-hidden').find('[required]').removeAttr('required').attr('data-required','')}});$(document).on('keydown, keyup','input[maxlength]',function(){var $field=$(this),$min=parseInt($field.attr('min'));$max=parseInt($field.attr('maxlength'));if($max&&$field.val().length>=$max){$field.val($field.val().substr(0,$max));if($field.attr('name').substr(0,9)=='sort_code'){$field.next('input[name^=sort_code_]').focus()}}
if($min&&(parseInt($field.val())<$min||isNaN(parseInt($field.val())))){$field.val($min)}});$('.donatron-go-modal').removeAttr('href');$(document).on('click','.donatron-go-modal',function(e){donate_modal_open();if($('#navi-global').hasClass('active')){$('#navi-global').trigger('click')}});$(document).on('donation-modal',function(e){donate_modal_open()});$(document).on('click','#donatron-close',function(){donate_modal_close();donate_clear_cart()});$(document).on('submit','#donation-submission',function(e){e.preventDefault();donate_checkout($(this).serialize())})}
donate_deploy();function donate_membership_set(){var campaign=sas_ds_params;$(document).on('change','input[name="owner"]',function(){var current=$(this),content=$(this).closest('.donation-content').find('.donate-active'),active_custom_value=$(this).closest('.donation-content').find('.donation-option-info-wrap input[name="other_amount"]'),donation_type=$(this).closest('#donation-switcher').find('#donation-type-tabs .donate-active').attr('data-tab'),options=content.find('.donation-slider .donation-slide');if(current.is(':checked')){$(options).each(function(){if(campaign!==null&&campaign.donation_campaign===''&&$(this).attr('data-config').indexOf('custom')>=0||$(this).attr('data-custom')==='true'){$(this).click();var custom_value=content.find('input[name="other_amount"]');custom_value.attr('data-prev',custom_value.attr('min'));if(donation_type=='donation-single'){if(active_custom_value.val()<50){custom_value.attr('min',50).attr('data-value',50).val(50.00).keyup().parent().click()}else{custom_value.attr('min',50).attr('data-value',active_custom_value.val()).val(active_custom_value.val()).keyup().parent().click()}}else{if(custom_value.val()<4){custom_value.attr('min',4).attr('data-value',4).val(4.00).keyup().parent().click()}else{custom_value.attr('min',4).attr('data-value',active_custom_value.val()).val(active_custom_value.val()).keyup().parent().click()}}
current.attr('disabled',!0)}else{$(this).hide()}});setTimeout(function(){current.attr('checked',!0);current.removeAttr('disabled')},1500)}else{current.attr('checked',!1);$(options).each(function(index,value){if(index==0){$(this).click()}
if(campaign!==null&&campaign.donation_campaign===''&&$(this).attr('data-config').indexOf('custom')>=0||$(this).attr('data-custom')==='true'){$(this).find('h4').text('Other');var custom_value=content.find('input[name="other_amount"]');custom_value.attr('min',custom_value.attr('data-prev')).attr('data-value',custom_value.attr('data-prev')).val(null);custom_value.removeAttr('data-prev')}
$(this).show()})}})}
donate_membership_set();function donate_campaign_refresh(element){var campaign=sas_ds_params;if(campaign!==null&&campaign.donation_campaign!==''&&element){if(campaign.data.hide_monthly||campaign.data.hide_single){var donate_wrap=element.closest('#donatron-embed-wrap'),type_tabs=donate_wrap.find('#donation-type-tabs');type_tabs.hide();donate_wrap.find('#donation-switcher .donation-content').css('border-top','none')}
if(campaign.data.hide_monthly){type_tabs.find('li[data-tab="donation-single"]').click()}
if(campaign.data.hide_single){type_tabs.find('li[data-tab="donation-monthly"]').click()}
if(donate_campaign_options_check(sas_ds_params.data.step_one.single.options)){var single_options=$(donate_wrap).find('#donation-single .donation-slider .donation-slide');donate_campaign_switch_options(single_options,'single')}
if(donate_campaign_options_check(sas_ds_params.data.step_one.monthly.options)){var monthly_options=$(donate_wrap).find('#donation-monthly .donation-slider .donation-slide');donate_campaign_switch_options(monthly_options,'monthly')}}}
function sas_donate_hide_tabs(element){var campaign=sas_ds_params;if(campaign==null||campaign.data==null)return;if(campaign!==null&&element&&campaign.data.hide_monthly||campaign.data.hide_single){if(campaign.data.hide_monthly||campaign.data.hide_single){var donate_wrap=element.closest('#donatron-embed-wrap'),type_tabs=donate_wrap.find('#donation-type-tabs');if(campaign.data.hide_monthly){type_tabs.find('li[data-tab="donation-single"]').addClass('donate-active');donate_wrap.find('#donation-single').addClass('donate-active');setTimeout(function(){type_tabs.find('li[data-tab="donation-single"]').trigger('click')},500);donate_wrap.find('#donation-monthly').removeClass('donate-active');type_tabs.find('li[data-tab="donation-monthly"]').hide()}
if(campaign.data.hide_single){type_tabs.find('li[data-tab="donation-monthly"]').addClass('donate-active');donate_wrap.find('#donation-monthly').addClass('donate-active');setTimeout(function(){type_tabs.find('li[data-tab="donation-monthly"]').trigger('click')},500);donate_wrap.find('#donation-single').removeClass('donate-active');type_tabs.find('li[data-tab="donation-single"]').hide()}}}}
function donate_campaign_switch_options(options,type){var campaign=sas_ds_params;if(campaign!==null&&campaign.donation_campaign!==''){if(type=='single'){var data=campaign.data.step_one.single.options}else{var data=campaign.data.step_one.monthly.options}
var data_config=$(options).closest('.donation-slider').find('.donation-custom').closest('.donation-slide').attr('data-config');var data_option=$(options).closest('.donation-slider').find('.donation-custom').closest('.donation-slide').attr('data-option');$(options).each(function(index,value){if($.isNumeric(data[index].amount)){$(this).attr('data-config',data_config);$(this).attr('data-option',data_option);$(this).attr('data-campaign',!0);$(this).attr('data-amount',data[index].amount);$(this).find('.donation-option h4').text('£'+data[index].amount);$(this).find('.donation-option-info h5').text('£'+data[index].amount+' donation');$(this).find('.donation-option-info p').text(data[index].description)}else{$(this).attr('data-custom',!0);$(this).find('.donation-option-info h5').text(data[index].amount);$(this).find('.donation-option-info p').text(data[index].description)}
if($(this).hasClass('donate-active')){var container=$(this).closest('.donate-box'),wrap=container.find('.donation-option-info-wrap'),element=$(this).find('.donation-option-info').clone().css('display','block');wrap.empty();$(element).appendTo(wrap)}})}}
function donate_campaign_options_check(data){if(typeof data[0]!=='undefined'&&typeof data[0].description!=='undefined'&&typeof data[0].amount!=='undefined'){return!0}else{return!1}}
function donate_campaign_success(element,type){var campaign=sas_ds_params;if(campaign!==null&&campaign.donation_campaign!==''){if(type=='single'){var data=campaign.data.success_page.single}else{var data=campaign.data.success_page.monthly}
if(element.length>0){var donate_wrap=element.closest('#donatron-embed-wrap'),content=donate_wrap.find('#donation-success .donation-content');content.empty();$('<div>'+data.content+'</div>').appendTo(content);$('<div class="donation-description-success"><p>'+data.title+'</p></div>').prependTo(content)}}}
function donate_campaign_load(){if($('.sas-ds-tabs-menu').length>0){$(document).on('click','.sas-ds-tabs-menu li',function(){if($(this).text()=='Donate Today'){donate_campaign_refresh($(this));$('.donate-box.donate-active').find('.donate-active').click()}})}}
donate_campaign_load();function donate_campaign_data_push(){var campaign=sas_ds_params;if(campaign!==null&&campaign.donation_campaign!==''){$push.donation_campaign=campaign.title}else{if(getUrlParameter('campaign')==undefined){$push.donation_campaign='General Donation'}}}
function donate_campaign_bg(){var campaign=sas_ds_params;if(campaign!==null&&campaign.donation_campaign!==''&&campaign.bg_image!==''){$('#genesis-content').closest('body').addClass('sas-dc-has-bg');$('#genesis-content').addClass('sas-dc-bg-img').css('background-image','url('+campaign.bg_image+')')}}
donate_campaign_bg();function get_donate_type(){return $('#donatron-embed').attr('data-donate')}
function club_two_fifty_display(){if(get_donate_type()=='business'){$push.is_two_fifty=!0;$('#donation-type-tabs').hide();$('#donation-switcher .donation-content').css('border','none');$('.donation-slide').each(function(){if($(this).attr('data-config')=='annual'){$(this).find('.donation-option-info h5 span').text('annually');var checkbox='<div class="sas-donate-info-checkboxes"><label><input type="checkbox" name="recurring"/><b>Annual Donation</b></label></div>';$(checkbox).appendTo($(this).find('.donation-option-info'))}
var custom=$(this).find('.donation-custom');if(custom.length>0){custom.find('input[name="other_amount"]').attr('min',20).val(20)}})}}
function donate_length_type(){if(get_donate_type()=='business'){var checkboxes='<div id="sas-club-two-fifty-types"><label><input type="checkbox" name="two_fifty_type" value="monthly" checked/><b>Monthly</b></label><label><input type="checkbox" name="two_fifty_type" value="annually"/><b>Annually</b></label></div>';$('.donation-slide').each(function(){var custom=$(this).find('.donation-custom');if(custom.length>0){$(checkboxes).appendTo($(this).find('.donation-option-info'))}});$(document).on('change','input[name=two_fifty_type]',function(){$('input[name=two_fifty_type]').not(this).prop('checked',!1);var $target=$(this).closest('.donate-box');var $custom=$target.find('.donation-custom input[name="other_amount"]');if($target.find('input[name=two_fifty_type]:checked').val()=='monthly'){$target.find('input[value=monthly]').prop('checked',!0);$target.find('.donation-custom').closest('.donation-slide').attr('data-config','');donate_switch_type('monthly');$push.products[2].options[2].id=0;$custom.attr('min',20).val(20).keyup().parent().click();donate_switch_type('monthly')}else{$target.find('input[value=annually]').prop('checked',!0);$target.find('.donation-custom').closest('.donation-slide').attr('data-config','annual');donate_switch_type('recurring');$push.products[2].options[2].id=39340;$custom.attr('min',250).val(250).keyup().parent().click();donate_switch_type('recurring')}});$(document).on('click','input[name=two_fifty_type]',function(e){if(!$(this).is(':checked')){e.preventDefault()}})}}
function sas_set_woo_pages_data(){if(typeof(Storage)!=='undefined'){var campaign=sas_ds_params;if(campaign!==null&&campaign.title!=='Donate'){sessionStorage.setItem('sas_woo_data',JSON.stringify(campaign.data.success_page.single))}else{sessionStorage.setItem('sas_woo_data',JSON.stringify($push.blocks.woocommerce))}}}
function sas_get_woo_pages_data(){if(typeof(Storage)!=='undefined'){var woo_data=sessionStorage.getItem('sas_woo_data');if(woo_data){return JSON.parse(woo_data)}}}
function sas_ajax_event(){var oldXHR=window.XMLHttpRequest;function newXHR(){var realXHR=new oldXHR();realXHR.addEventListener("readystatechange",function(){var pathname=window.location.pathname;var woo_data=sas_get_woo_pages_data();if(woo_data){if(realXHR.readyState==4&&pathname.indexOf('/checkout/pay/')>=0){if(localStorage.hasOwnProperty('sas_current_donation_cache')){var donation_tracking_data=JSON.parse(localStorage.getItem('sas_current_donation_cache'));var donation_tracking=new PushLogic_Tracking(donation_tracking_data,!0);donation_tracking.add_payment_info()}
$('.entry-title').text('Donation Authorisation');$('.order_details').remove();$('.scriptlesssocialsharing').remove()}
if(realXHR.readyState==4&&pathname.indexOf('/checkout/order-received/')>=0){if(localStorage.hasOwnProperty('sas_current_donation_cache')){var donation_tracking_data=JSON.parse(localStorage.getItem('sas_current_donation_cache'));var donation_tracking=new PushLogic_Tracking(donation_tracking_data,!0);donation_tracking.purchase();localStorage.removeItem('sas_current_donation_cache')}
sas_facebook_pixel();$('.entry-title').html('<span class="sas-woo-success-title">'+woo_data.title+'</span>');$('.woocommerce').html('<div id="sas-woo-success-ajax">'+woo_data.content+'</div>');$('#woo-order-received').remove()}}else{if(realXHR.readyState==4&&pathname.indexOf('/checkout/pay/')>=0){if(localStorage.hasOwnProperty('sas_current_donation_cache')){var donation_tracking_data=JSON.parse(localStorage.getItem('sas_current_donation_cache'));var donation_tracking=new PushLogic_Tracking(donation_tracking_data,!0);donation_tracking.add_payment_info()}
$('.entry-title').text('Donation Authorisation');$('.order_details').remove();$('.scriptlesssocialsharing').remove()}
if(realXHR.readyState==4&&pathname.indexOf('/checkout/order-received/')>=0){if(localStorage.hasOwnProperty('sas_current_donation_cache')){var donation_tracking_data=JSON.parse(localStorage.getItem('sas_current_donation_cache'));var donation_tracking=new PushLogic_Tracking(donation_tracking_data,!0);donation_tracking.purchase();localStorage.removeItem('sas_current_donation_cache')}
sas_facebook_pixel();var success_content='<p>Your donation is helping us campaign for a better future for the ocean. We’re tackling plastic pollution in our oceans and rivers, campaigning to end sewage pollution, and fighting the Ocean and Climate emergency. We’re also campaigning for the Ocean to be recognised as a vital tool in the fight against climate change.</p><p>Thanks a lot for your support - together we are the voice of the ocean!</p><p>Team SAS x</p><p>PS. If you have any questions about your donation please call us on <a href="tel:+441872553001">01872 553001</a> and we\'ll be happy to help. Thank you!</p>';$('.entry-title').html('<span class="sas-woo-success-title">Thank you for your Donation to Surfers Against Sewage</span>');$('#woo-order-received').remove();$('.woocommerce').html('<div id="sas-woo-success-ajax">'+success_content+'</div>');$('.woocommerce-thankyou-order-received').remove()}}},!1);return realXHR}
window.XMLHttpRequest=newXHR}
sas_ajax_event();function sas_reps_autocomplete(){$('#donation-rep').autoComplete({minChars:2,source:function(term,suggest){var choices=["Adam Duncan","Alex Goodchild","Annie Ashwell","Charlotte Glover","Chloe Markham","Ed Campbell","Edward Crook","Emma Wurmli-Quann","Harriet Noy","Harry Flaherty","Holly Rumsby","Jeremy Goffin","Kelly Bond","Mark Bradnum","Melissa Masters","Neil Cutts","Summer Clarke","Tegan Godfrey","Toni Buckle","Ali Elly","Andrew Riley","Becks Gillmore","Chad Male","Christian Dunn","Gabe Davies","Gary Lovatt","Georgina Cundell","Helena Payne","Janet Jackson","Jayne Rigby","Jennifer Warner","Katherine Faudemer","Kim Hollern","Linda Lambert","Manon Zannone","Matt Jones","Nick Noble","Paul Parry","Sally McGee","Sally Wilkinson","Sasha Taylor","Simon Palmer","Steve Crawford","Tim Faudemer","Tom Bing","Aine McAuley","Carla Magee","Dan Lavery","Declan McMenamin","Eunan Brown","Owen Waters","Peter Ravenscroft","Sian Elliott","Aileen Corral","Ailsa McNaughton","Alasdair Steele","Alasdair Ferguson","Amy Barclay","Andrew Wilkie","Brian Allen","Casey McIntyre","Charlie Allanson-Oddy","Elspeth Simpson","Gerald Earp","Gill Houlsby","Janie Steele","Jenny Smith","Julien Moreau","Katie Tunn","Katie Miller","Lauren Smith","Rebecca Steele","Tom Rawson","Tom Hunter","Catriona Spink","Tom Coe","Adam Sennitt","Alex Baxter","Alex Ruffhead","Atlanta Cook","Claire Potter","Claire Sumners","Cliff Culver","Colin Darbyshire","Dave Melmoth","David Tudor","Emma Reasbeck","Helen Shine","Holly Benham","Jess Morris","June Pratt","Katrina Ayling","Lauren Hollas","Libby Howell","Lizzi Webb","Luke Munroe","Mairin Williams","Martin Francis","Matt Indge","Monica Coles","Momoko Hill","Natalie Gay","Oli Grogan","Ric Baldock","Rob Hills","Sarah Boyks","Stella Grant","Stu Davies","Teesh Hooper","Tom Hawkins","Tor Jackson","Aaron Bray","Adam Reed","Al Sharmers","Ally Cattaneo","Amy Daniel","Andrew Coleman","Annette Eatock","Beccy Rogers","Becky Balmer","Ben Gaby","Ben Rogers","Bryony Henderson","Cal Major","Charlotte England","Chris Betty","Christie Middleton","Christine Spreiter","Claire Moodie","Claire Thorpe","Claire Meaden","Cordelia Dewey","Craig Holmes","Danni Gilbert","Dave Muir","Dean Wilford","Debbie Campbell","Declan McVickers","Denise Bickely","Dominic vanNieuwkerke","Emily Haggett","Emma Askew","Emmajo Haslam","Eryn Murray","Esmee Gregorius","Giles Watson","Gillian Horsley","Gilly Slater","Hugo Brown","Izzy Wedderburn","Jack Williams","James Craig","James Szymankiewicz","Jess Channing","Jo Wakeham","Julia Denni","Julian Thomas","Karen Butfield","Kaylee Wonnacott","Krissy Middleton","Lez Barlow","Lindsey Cole","Liss Taylor","Lizzi Larbalestier","Lizzi Lewis","Lowenna Jones","Macy Scott-Joyce","Mark Wakeling","Martin Poyntz-Roberts","Matt Harwood","Megan Abrahams","Natalie Fox","Nic Nolan","Nick Barry","Nick Watson","Rachel Yates","Rob Curtis","Ruby Free","Sally Welburn","Sam Kenshole","Sam Autie","Tom Evans","Vicki Chilcott","Beth Trevithick","Warren Bincheno","Alun Moseley","Amy Goodwin","Anna Strzelecki","Bella Sanderson","Claire Downs","Danuta ","Ffion Matthews","Florence Taylor","Gail Tudor","Hannah Finch-Saunders","Jade Osborn","James Harper","Jaz Strzelecki","Jetske Germing","Jo Rogers","Jordan Wright","Kerry Morgan","Laura Truelove","Laura Sanderson","Lloyd Nelmes","Nia ","Paul Renfro","Phil Owen","Phoebe Neville-Evan","Sian Sykes","Simon Williams","Steve Lyall","Holly Storey"];var matches=[];for(i=0;i<choices.length;i++)
if(~choices[i].indexOf(term))matches.push(choices[i]);suggest(matches)},onSelect:function(e,term,item){$('#donation-rep').val(term)}})}
function sas_reps_rep_display(){var container=$('.donation-rep');var next=$('a[data-action="payment+"]');var input=$('input[name="donation_rep"]');$(document).on('click','#donation-type-tabs li',function(){if($(this).attr('data-tab')=='donation-single'){var next=$('a[data-action="woocommerce+"]')}else{var next=$('a[data-action="payment+"]')}});$('input[name="donation_rep_confirm"]').on('change',function(){$('input[name="donation_rep_confirm"]').not(this).prop('checked',!1)});$(document).on('click','input[name="donation_rep_confirm"]',function(){var checkbox=$(this);if($('input[name="donation_rep_confirm"]:checked').length>0){next.removeClass('disabled')}else{next.addClass('disabled')}
if(checkbox.val()=='Yes'){$('#sas-donation-rep').show();input.prop('required',!0)}else{$('#sas-donation-rep').hide();input.removeAttr('required')}})}
function sas_facebook_pixel_data_storage(){var donation_data=$push;if(typeof(Storage)!=="undefined"&&donation_data!==undefined&&donation_data!==''&&donation_data!==null){if(donation_data.user.product.option.value!=="undefined"&&donation_data.user.product.option.value!==undefined&&donation_data.user.product.option.value!==''&&donation_data.user.product.option.value!==null){localStorage.setItem('sas_fp_amount',donation_data.user.product.option.value)}
if(donation_data.donation_campaign!=="undefined"&&donation_data.donation_campaign!==undefined&&donation_data.donation_campaign!==''&&donation_data.donation_campaign!==null){localStorage.setItem('sas_fp_content_name',donation_data.donation_campaign)}
if(donation_data.user.product.slug!=="undefined"&&donation_data.user.product.slug!==undefined&&donation_data.user.product.slug!==''&&donation_data.user.product.slug!==null){localStorage.setItem('sas_fp_content_type',donation_data.user.product.slug)}}}
function sas_facebook_pixel(){if(localStorage.hasOwnProperty('sas_fp_amount')&&localStorage.hasOwnProperty('sas_fp_content_name')&&localStorage.hasOwnProperty('sas_fp_content_type')){$('head').append("<script>fbq('track', 'Purchase', {value: localStorage.getItem('sas_fp_amount'), currency: 'GBP', content_name: localStorage.getItem('sas_fp_content_name'), content_type: localStorage.getItem('sas_fp_content_type')});<\/script>")}}
function sas_donate_landing_page_copy(){var campaign=sas_ds_params;if(campaign!==null){if(campaign.data.step_one.single.content!==undefined&&campaign.data.step_one.single.content!==''){$('#donation-single .donation-description').html(campaign.data.step_one.single.content)}
if(campaign.data.step_one.monthly.content!==undefined&&campaign.data.step_one.monthly.content!==''){$('#donation-monthly .donation-description').html(campaign.data.step_one.monthly.content)}}}})