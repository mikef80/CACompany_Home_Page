class PushLogic_Tracking{constructor(data,gtag_mode=!1){this.data=data;this.params=sas_ds_params;this.campaign_name=this.set_campaign_name();this.gtag_mode=gtag_mode}
set_campaign_name(){if(this.params=='null'||this.params==null){return'General Donation'}else{if(this.params.donation_campaign==''){return'General Donation'}else{return this.params.donation_campaign}}}
random_id(length){var result='',characters='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',charactersLength=characters.length;for(var i=0;i<length;i++){result+=characters.charAt(Math.floor(Math.random()*charactersLength))}
return result}
set_storage(name,data){if(typeof(Storage)!=='undefined'){localStorage.setItem(name,JSON.stringify(data))}}
get_storage(name){if(typeof(Storage)!=='undefined'){JSON.parse(localStorage.getItem(name))}}
get_total_value(products){var total=0;jQuery(products).each(function(index,product){total+=parseFloat(product.price)});return total.toFixed(2)}
all_products(step=''){var self=this,products=[];jQuery(this.data.products).each(function(type_index,product_type){jQuery(product_type.options).each(function(item_index,item){var product={item_id:'SAS_'+product_type.slug.toUpperCase()+'_DONATION_'+(item_index+1),item_name:product_type.title,affiliation:'SAS Donation System',currency:'GBP',item_category:self.campaign_name,item_category2:product_type.slug,item_category3:step,price:parseFloat(item.value).toFixed(2),quantity:1,};products.push(product)})});return products}
current_product(step=''){var products=[],current_product=this.data.user.product,product={item_id:'SAS_'+current_product.slug.toUpperCase()+'_DONATION_'+1,item_name:current_product.title,affiliation:'SAS Donation System',currency:'GBP',item_category:this.campaign_name,item_category2:current_product.slug,item_category3:step,price:parseFloat(current_product.option.value).toFixed(2),quantity:1};products.push(product);return products}
cache_checkout_data(){if(typeof(Storage)!=='undefined'){localStorage.setItem('sas_current_donation_cache',JSON.stringify(this.data))}}
begin_checkout(){var step='Donation Step 1 - Options Page',gtag_data={event:'begin_checkout',ecommerce:{}};return(this.gtag_mode)?window.dataLayer.push(gtag_data):gtag_data}
add_to_cart(){var step='Donation Step 2 - Details Page',gtag_data={event:'add_to_cart',ecommerce:{currency:'GBP',value:this.get_total_value(this.current_product(step)),items:this.current_product(step)}};return(this.gtag_mode)?window.dataLayer.push(gtag_data):gtag_data}
add_shipping_info(){var step='Donation Step 3 - Payment Page',gtag_data={event:'add_shipping_info',ecommerce:{currency:'GBP',value:this.get_total_value(this.current_product(step)),items:this.current_product(step)}};return(this.gtag_mode)?window.dataLayer.push(gtag_data):gtag_data}
add_payment_info(){var step='Donation Step 4 - Confirmation Page',gtag_data={event:'add_payment_info',ecommerce:{currency:'GBP',value:this.get_total_value(this.current_product(step)),items:this.current_product(step)}};return(this.gtag_mode)?window.dataLayer.push(gtag_data):gtag_data}
purchase(){var step='Donation Step 5 - Success / Conversion',gtag_data={event:'purchase',ecommerce:{currency:'GBP',transaction_id:this.random_id(24),value:this.get_total_value(this.current_product(step)),items:this.current_product(step)}};return(this.gtag_mode)?window.dataLayer.push(gtag_data):gtag_data}}